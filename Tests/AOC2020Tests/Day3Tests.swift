import XCTest
@testable import AOC2020

final class Day3Tests: XCTestCase {
    
    let slopesPart2 = [
        TobogganSlope(dx: 1, dy: 1),
        TobogganSlope(dx: 3, dy: 1),
        TobogganSlope(dx: 5, dy: 1),
        TobogganSlope(dx: 7, dy: 1),
        TobogganSlope(dx: 1, dy: 2),
    ]
    
    func testPart1() {
        let result = countTrees(in: Self.testValuesPart1)
        XCTAssertEqual(result, 7)
    }
    
	func testResultPart1() {
        let result = countTrees(in: Self.valuesPart1)
        
        print("Solution of part 1: \(result)")
        XCTAssertEqual(result, 169)
	}

	func testPart2() {
        
        var treeList = [Int]()
        for slope in slopesPart2 {
            let result = countTrees(in: Self.testValuesPart1, with: slope)
            treeList.append(result)
        }
            
        let result = treeList.reduce(1, *)
        XCTAssertEqual(result, 336)
	}
    
    func testResultPart2() {
        var treeList = [Int]()
        for slope in slopesPart2 {
            let result = countTrees(in: Self.valuesPart1, with: slope)
            treeList.append(result)
        }
            
        let result = treeList.reduce(1, *)
        XCTAssertNotEqual(result, 12410420022)
        XCTAssertEqual(result, 7560370818)
    }
}

extension Day3Tests {
    static let testValuesPart1: [String] = """
        ..##.........##.........##.........##.........##.........##.......
        #...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..
        .#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.
        ..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#
        .#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.
        ..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....
        .#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#
        .#........#.#........#.#........#.#........#.#........#.#........#
        #.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...
        #...##....##...##....##...##....##...##....##...##....##...##....#
        .#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#
        """
        .split(separator: "\n")
        .map(String.init)
    
    static let valuesPart1: [String] = """
        ....#............#.###...#.#.#.
        .#.#....##.........#.....##.#..
        .#..#.#...####.##..#......#..##
        ......#...#...#.......#........
        ........#...###..#.#....#....#.
        ..##.....#.....#.#.........#.#.
        .##.......#.#.#...#..#...##...#
        ...##.....#....##....#...###.#.
        ..#...#......##.#.##.....#.#..#
        .#....#.###.........#..........
        .#.#..##.....###.....###....#.#
        ....###....#......#...#......##
        ......##...#.##.........#.#..#.
        ##.#....##...#..##....#.#..#.##
        .#...#..#.....#.#.......#...#..
        ..........#..###.###......##..#
        ..#.##.#..#......#.......###.#.
        ...#...#.#.#..#...#.#..........
        #........#..#..#.#....#.##..###
        #...#.....#..####.........####.
        .....###..........#.#...##...#.
        .....#...#..#.......#....##.#..
        ...........#..##.....#...#..#..
        ......##..#........#...........
        #.#..#.#.#..#.....#....#.....#.
        ..#....##....##...#.....#......
        .#.#....#..#.#......#..###...#.
        .......#...#.#....##..#..#..#..
        .#.#.#.......#....#.#.#.......#
        .#..........#.##.#...#..#.#.##.
        ..#.#..........#.#....##.#.##..
        ###..#..#.#...##.#.#..#........
        ##....#...#....#....#...#.#....
        #...#.#....#.##..##...#.#......
        ......#...#.###......##....#...
        .................#.###......#..
        ##..#....#....##...###.#.#..###
        ..#..........#..####..##..#...#
        .#......#..#.#...........##.#..
        .#..#......#...#.#.#..#.#.#.#.#
        .#......###.....#.#.#......##..
        #..........#.##...#...........#
        ..#....#.##....#.........#.....
        .#..##....#...##.........#..#..
        ....##..#.###..#.#...#..###..#.
        ..#......#........#...#.#......
        ........#..#..#..#...#.##......
        .##.#.#......#...#.........#...
        #..###.#...#....###.##..###....
        ........##.............#....#..
        ...#...............#....#.#....
        #..........#..#..#.#.....#...#.
        .#.............#...#.......#..#
        .#..#..#...#........##.........
        .....#.#..#.#..#..##.........#.
        ..#..##...#....#.#...#.###..#..
        #...........##.....#...#.##....
        #.#.#.#........##......#...#.#.
        ......#..#.###.#...#.##.##....#
        .#....#...#....#........#....#.
        ..#.#..........#..##.......#..#
        .....#...##..#................#
        .#...............##...#.##...##
        #.####....##.....#.......#.##..
        ......#.##.#...##..###..#.#....
        .#.##.#...##..#.......#.#..#...
        #...#.##..........##..........#
        #.###...#...#..#.....#.#.##..##
        .##.....#....#...##.....##.....
        ...#........#..###.###...#.....
        ##..#....#.....#...#.#....#.#..
        #....#....#.#..........#...#..#
        ...##..#......#..#..#..#..#....
        .....##...#..####..##.........#
        .....#..#.#...#..#....##..##...
        ..#.......##.#..#.##...#.#....#
        .#..#.#...##..##....#..#......#
        ..##.##..##...###..#....#...#..
        ........##.......##...##.....##
        .#....###...#..#..#..#.......#.
        #.###............#....##.....#.
        ..........#...#...##..#...#....
        ..#......#.##.......#....##..##
        ..#..###.....#...#.......#.....
        #.#...##.....#...#....#.......#
        ....##.##.#....#.....#.#....#..
        ...#....#.###............#..###
        #..##..#.........##.....#.#...#
        ....#.......##......#....#...#.
        ....#..##.#..........#.........
        ....#...#.###.......#...#.#....
        #..#..#...#.......##...#..#.##.
        #.......#...##.##......#.......
        ##..##...##...#......#...#...##
        ..#...#.#.####.#...##.....##...
        #...#..#..#...##......#.#..#..#
        ..##..##.#.#..#...####.....###.
        .#........#..##.###...#.##.#...
        ........#..#...##......#.#....#
        ..#...###.......##..##..#....#.
        .##...#.#..#.##.......##.###...
        #....#.#.#........#....#..#.##.
        ....#.##.#.##..#.#####.....###.
        #.#..#..#...#.#..#.......#.#...
        ....#...#....###...............
        .###.#.....#.#.......###......#
        ##...#.#.###....##..#...##.....
        ...#.#..#.###.#.......#...#.#..
        .#...#....#...#..####....###...
        ..#....##.....##.#.#.##....#...
        #....#..##.......#...##.##....#
        .##..#.......#..#....###.......
        #.##.....##.#.........#......##
        .####.#...#.....#..#...#.##..#.
        ....#...........#.....#........
        .#............##...#.......#.#.
        #....#.##........#....#.#..#..#
        #....#.##....#...##...#..#..#..
        ...#..#.####.#....#............
        ....#......#.........#.........
        #....##....###.....#......#.#..
        ...#..#....#........###..#...#.
        ..#.#........#.#.#.###..#.#.#..
        .....###.....##.#....###.#.....
        ##.#....#....##...##.###.#.##..
        .###.#..#.......##...#...##....
        .#...###........#.......##.##..
        #......####...#...##.#.######..
        ....##.............#..##.##...#
        ...........#..##.#...#.#.#...#.
        ###.......#.##..#....#...#....#
        .........#.....#.#.#..##.#.....
        #...##..#....#..#.............#
        ...#.......#.##.............#.#
        .....#..#...##......####..#....
        .#.#.#.....#...####..#...##...#
        #...#.#..#..#.#..#.##..........
        .....#.##..#.#.##..#.#.#....#.#
        ...##..#...#...#..#....#.......
        ........#.#..#...#...#.#...#...
        ##..#........#..#.....#......##
        .........#..#...#......#......#
        ..#.#.#........##...#.##.....##
        .###....##....#...#....#..#....
        .#.............###...#..##..###
        .##.##.##.......###.........#.#
        ..#..###...#...#....#..#.#..#.#
        ......#..#.#..#.....#.#........
        ......#...####...#.#.....#.....
        .#...##.......#..#......#...#..
        #..#...#.......###..#..#.#.#.#.
        .....#.....###.##....#.#.##.#.#
        #........#....##...#..#.##..#..
        ...#.#........##....#.#..###.#.
        #...#...##.........#........###
        ##...#.##..##...#.....#.###.#..
        #.###.#.#..#...........##..#...
        ........#.......#..#..#.###....
        #........#....#......###.......
        ..#.###.######...#.###..#......
        ...#...######..#.....#....#.#..
        ..#.......#..#..#.........#...#
        .#...#..##.##.........##.......
        .........#.#.##.#..#....#.#...#
        #.......#....#......#.....###.#
        ##..............#.###........#.
        ..#.##..#.##.....#...#.#.#..###
        ..#.#......#..#..##.#........#.
        ..#.....#...#.#...#...###..#.#.
        .......#...........#..#..#.#.##
        .......#...##..#.###...........
        .#........#.###.#..#..#..#..#..
        ##.#.##....#..###..#.##.##...#.
        .....#....##.#........#.#.#....
        ....##....#..#..#....##....#.#.
        #.....##....#.....#.###.#....#.
        .#.##.##..#..#...#...........##
        ...#..###..#.....##....#.......
        ...#..##..###.#..#..#.#........
        ......##..#.......#..##.....###
        .#...##.#.#.#......#...#.#.#.##
        ....#.#....#...#........#...#..
        ....#.#......#.#.###.#.#.##.#..
        #..#........###..#..#..#.....#.
        ...#....#...##...#........##.##
        .....#..#..#.....#....#.#...#..
        ..#.###....#.#..##......#.##.#.
        ..####......#..#.#.#..#.#####..
        .......##..#..###.#............
        ..###.#........#..........##.##
        #.#.........#.##.#......#..#...
        ...#.....#.....##..#..##.##..#.
        #.#.##....#.......###....##....
        ...##.#..#...##.#..#......#..#.
        ..##.........#.##.#####...#.#..
        .#....#...#....#.#.....##...###
        ##.....#..####............###.#
        ......#...........#....#.......
        .#......#.....##...........###.
        #......##.......#.#.#..##.....#
        ...###.#.....##.#...#.#....#.#.
        ...###.......#...#.............
        ..#..#.#....#.#.###.#.#.##..##.
        ..##...#..#.#..##.#.##....##...
        ..#...........#..#....#....#...
        #.##...........#..#.#..##.#.#..
        ...##...##................#..#.
        .#...#.##......#.#......#.####.
        #.##....#....#.........#....###
        .....###........#.#.#.##...#.##
        .....#....#.#....#.........#..#
        ..#...#.#.#.#...#...#...##.#..#
        ###.......#.....#.............#
        #.####.#.......#.#.#.#..#.#....
        #..#..#####......#....#..##....
        ...............#.....#.#....###
        .###.....#...#.##..#.#..#.#####
        #.##.....#......##.......##....
        ..........###.......#...#.#....
        ..#.#..#...##.....#........#.#.
        ........##.##....#####.#.#..##.
        ..##.#.#...#####..........#.#.#
        #.........#......##...#.....#..
        .##.#........#...#..##...#...#.
        .......##..#...#.....#.##......
        ....#.#...##..##..#....##......
        #........#..........##..####.#.
        ...###...#.#.###.#...#....#.#.#
        .....##.#.....#........#.#....#
        #.......#....#...##..#......#..
        ...#..........#.#.#...#.#.###.#
        ....##.....#.##..#.#.#.........
        #.##..##..#....#.........#...#.
        .###..........#...##.#..#......
        .....####.............##...###.
        .#..#....#..#...#..#...........
        #..#..##..#...#.##..#.###.#...#
        ......#.#..###...#..#.....#..#.
        ##.##......#...#.#...#.........
        ....##.#.......#.#..##....#.#.#
        #..##..#...###.#....##.........
        .............#.#....#...##..#..
        ..#....#...#.....#.##.#..##..##
        ##.#..##.#..##.#.#.##.#...#.#..
        .##.#..#.#........##.#...##....
        #.........##....##..#......#...
        .#.#.......##...#..#......###.#
        ........#.#.#.#......#....#..#.
        ...##..#...#...#.##..#....#.#..
        ...#.#.#.#.......#.......###..#
        ...#..##..#####.#.....##.#..#..
        .......#.#.....#.....#...#...##
        #...#...#......##.#....##......
        #.....#.#.#.....#....#......#..
        ..#..#.##.#......##..#.#..#..##
        ####...#.....#....#.#..........
        ....#.....###...#...##......#..
        .....#....#...#............#...
        ...#...#..##.........#...#...##
        #.#..#.#...##.#.......#..#.#...
        .#.....#...##.............#...#
        .....#..##..#....#......#.##..#
        ....#...###.................#..
        ...###...#....#...#...#........
        ....#.##.#.......#..#..........
        ...#..#......#.#...###...#.#...
        ..#.#..#...#.......#.......#.#.
        .#.#...#.#.##........#.........
        ...#..#...#....#.#.#.#.#..###..
        .#..##......#.#.##..#.##....#..
        #....#.......##.....#.#........
        ..###..#.#.#.......##....#.....
        ........#.#.#....##...##..#....
        #....##.#....#...##..##...#....
        ...#..##.#.....#...#.....##....
        .#.#..#..#...#....#..##.#....#.
        ##.#.##....#.....#....#....#.#.
        .##......#............##...#...
        #..##.#.####.#.#....#..#..#.#.#
        #...##...#......##....###.....#
        ..#.##.....#....#....#......#..
        .##.#...#.....#.#.#.#........##
        .#..#....#.#...........#...#...
        #.....#..#.....#.#.##.#.....#..
        ....#.....#..#.#....###........
        .....###...........#.#..##.#.#.
        ....###....#.......###..#...#.#
        .###.....#...##.#...##........#
        ..#..#.#..#...#.#...#.#..#...#.
        #.####.......#....##.#..#.#..#.
        ....#.#.##.#..###.........##.#.
        ..#..#.#....#....#.##..........
        ..##.###..#.#..#.#......#....#.
        .#..#.....##...#.#......##.#..#
        #.#....#..#.#.#........#.###...
        ...#....##....##..###.###.#.#..
        ..#....#.....#....##.#.........
        #.......#....#.........##..#...
        .#..#...#.#..#.#....#.#........
        ...#..###...#.....#......##....
        ..#...........#.....#..........
        ....###.#...#......#...#..#....
        .....#.##..#..#....#.......#..#
        ....##..#.#.#..............#.#.
        .#.#..#..#.#......#...#.#......
        ....#.......#.##....##.#.#.#..#
        ............#.#.#.....##.......
        ........#...##.#..#......#...##
        .........#...#...#....#...#.##.
        ..#.....#......#......#.....#..
        #....#...##..#.#....#.#...#.###
        .......#..#..#..#.#...#.....#.#
        ...#.#...#......##.....#..#....
        ...#.#.####..##.#..#...........
        ..##..##....#.....####...#....#
        ###.......#...##.#...#...#...#.
        .##..#.....#..####......#....#.
        #.....#..#..##..##...#..#..#...
        .#....#.....#...####..####.....
        ..#....#...#......#........#.#.
        ##.#.......#..#.....#..##..##..
        .#..#..#.#.#...#....##...#.##.#
        ##...#..#....#.........##......
        """
        .split(separator: "\n")
        .map(String.init)
}
